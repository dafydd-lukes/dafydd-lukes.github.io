<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Little Umbrellas - floss</title><link href="https://dlukes.github.io/" rel="alternate"></link><link href="https://dlukes.github.io/feeds/floss.atom.xml" rel="self"></link><id>https://dlukes.github.io/</id><updated>2017-12-19T00:00:00+01:00</updated><entry><title>Make the most of Python Jupyter notebooks</title><link href="https://dlukes.github.io/jupyter-magic.html" rel="alternate"></link><published>2017-12-19T00:00:00+01:00</published><updated>2017-12-19T00:00:00+01:00</updated><author><name>dlukes</name></author><id>tag:dlukes.github.io,2017-12-19:/jupyter-magic.html</id><summary type="html">&lt;p&gt;My favorite and most useful IPython magic functions.&lt;/p&gt;</summary><content type="html">&lt;p&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;&lt;a href="https://mybinder.org/v2/gh/dlukes/dlukes.github.io/source?filepath=content%2Fnotebooks%2Fjupyter_magic.ipynb"&gt;&lt;img src="https://mybinder.org/badge.svg" alt="Binder"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Python-based &lt;a href="http://jupyter.org/"&gt;Jupyter&lt;/a&gt; notebooks mostly consist of Python code, obviously, and some Markdown text. But they also offer some very handy functions and shortcuts which are not available in Python itself, and which are really helpful for interactive work. This is my personal best of / reference.&lt;/p&gt;
&lt;p&gt;The shortcuts fall into two groups:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;magics&lt;/strong&gt;: special functions with special syntax whose names start with &lt;code&gt;%&lt;/code&gt; (in which case they apply to the rest of the line → "line magics") or &lt;code&gt;%%&lt;/code&gt; (in which case they apply to the entire cell → "cell magics")&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;command line programs&lt;/strong&gt;: if you know how to use command line programs, you can do so directly from the notebook by prefixing the command line invocation with &lt;code&gt;!&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you want to follow along, the easiest way is to just &lt;a href="https://mybinder.org/v2/gh/dlukes/dlukes.github.io/source?filepath=content%2Fnotebooks%2Fjupyter_magic.ipynb"&gt;click this link&lt;/a&gt; and have Binder launch a Jupyter environment with the notebook loaded for you. Or you can download this post in its original notebook format &lt;a href="https://raw.githubusercontent.com/dlukes/dlukes.github.io/source/content/notebooks/jupyter_magic.ipynb"&gt;here&lt;/a&gt; and load it into your own Jupyter instance yourself.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;NB:&lt;/strong&gt; Most of the following also applies to the &lt;a href="https://ipython.org/"&gt;IPython REPL&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="Magics"&gt;Magics&lt;a class="anchor-link" href="#Magics"&gt;&amp;#182;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;The syntax of magic functions is modeled after the syntax of command line programs:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;to call them, just write their name and evaluate the cell, without any parentheses (unlike regular Python functions, which are called like this: &lt;code&gt;function()&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;arguments are separated just by whitespace (in Python, there are commas: &lt;code&gt;function(arg1, arg)&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;some have optional arguments (&lt;strong&gt;options&lt;/strong&gt;) which tweak their behavior: these are formed by a hyphen and a letter, e.g. &lt;code&gt;-r&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="Getting-help"&gt;Getting help&lt;a class="anchor-link" href="#Getting-help"&gt;&amp;#182;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;You can read more about the magic function system by calling the &lt;code&gt;%magic&lt;/code&gt; magic:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[1]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;magic&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;&lt;code&gt;%quickref&lt;/code&gt; brings up a useful cheat sheet of special functionality:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[2]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;quickref&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;If you want more information about an object, &lt;code&gt;%pinfo&lt;/code&gt; and &lt;code&gt;%pinfo2&lt;/code&gt; are your friends:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[3]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;This foo function returns bar.&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;bar&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[4]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# shows the object&amp;#39;s docstring&lt;/span&gt;
&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;pinfo&lt;/span&gt; foo
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[5]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# shows the full source code&lt;/span&gt;
&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;pinfo2&lt;/span&gt; foo
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;These are so handy that they have their own special syntax: &lt;code&gt;?&lt;/code&gt; and &lt;code&gt;??&lt;/code&gt;, placed either before or after the object's name:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[6]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;foo
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[7]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;foo&lt;span class="o"&gt;?&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[8]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;??&lt;/span&gt;foo
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[9]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;foo&lt;span class="o"&gt;??&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Of course, this also works with magic functions:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[10]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;%pylab
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;You can also open a documentation popup by pressing &lt;code&gt;Shift+Tab&lt;/code&gt; with your cursor placed in or after a variable name. Repeating the command cycles through different levels of detail.&lt;/p&gt;
&lt;h3 id="Manipulating-objects"&gt;Manipulating objects&lt;a class="anchor-link" href="#Manipulating-objects"&gt;&amp;#182;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;The appeal of an interactive environment like Jupyter is that you can inspect any object you're working with by just evaluating it:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[11]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[12]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt output_prompt"&gt;Out[12]:&lt;/div&gt;




&lt;div class="output_text output_subarea output_execute_result"&gt;
&lt;pre&gt;1&lt;/pre&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;&lt;code&gt;%who&lt;/code&gt; and &lt;code&gt;%whos&lt;/code&gt; will show you all the objects you've defined:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[13]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;who&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;foo	 
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[14]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;whos&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;Variable   Type    Data/Info
----------------------------
foo        int     1
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Sometimes though, these objects are large and you don't want to litter your notebook with tons of output you'll delete right afterwards. (Also, if you forget to delete it, your notebook might get &lt;a href="https://github.com/jupyter/notebook/issues/650"&gt;too large to save&lt;/a&gt;.) That's when you need to use the Jupyter pager, which lets you inspect an object in a separate window.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[15]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;This is a line of text.&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;1000&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[16]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;page&lt;/span&gt; foo
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;By default, the pager pretty-prints objects using the &lt;code&gt;pprint()&lt;/code&gt; function from the &lt;code&gt;pprint&lt;/code&gt; module. This is handy for collections, because it nicely shows the nesting hierarchy, but not so much for strings, because special characters like newlines &lt;code&gt;\n&lt;/code&gt; are shown as escape sequences. If you want the string to look like it would if it were a text file, pass the &lt;code&gt;-r&lt;/code&gt; option ("raw") to page through the result of calling &lt;code&gt;str()&lt;/code&gt; on the object instead:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[17]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;page&lt;/span&gt; -r foo
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;If you want to inspect the source code of a module, use &lt;code&gt;%pfile&lt;/code&gt; on the object representing that module, or an object imported from that module:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[18]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;random&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;choice&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[19]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;pfile&lt;/span&gt; os
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[20]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;pfile&lt;/span&gt; choice
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Sometimes, you create an object which you know you will want to reuse in a different session or maybe in a completely different notebook. A lightweight way to achieve this is using the &lt;code&gt;%store&lt;/code&gt; magic:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[21]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;store&lt;/span&gt; foo
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;Stored &amp;#39;foo&amp;#39; (str)
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;You can list the values stored in your database by invoking &lt;code&gt;%store&lt;/code&gt; without arguments:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[22]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;store&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;Stored variables and their in-db values:
foo             -&amp;gt; &amp;#39;This is a line of text.\nThis is a line of text.\
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;To restore a variable from the database into your current Python process, use the &lt;code&gt;-r&lt;/code&gt; option:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[23]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# restores only `foo`&lt;/span&gt;
&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;store&lt;/span&gt; -r foo
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[24]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# restores all variables in the database&lt;/span&gt;
&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;store&lt;/span&gt; -r
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;And this is how you clear no longer needed variables from storage:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[25]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# removes `foo`&lt;/span&gt;
&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;store&lt;/span&gt; -d foo
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[26]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# removes all variables&lt;/span&gt;
&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;store&lt;/span&gt; -z
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[27]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;store&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;Stored variables and their in-db values:
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="Working-with-the-file-system"&gt;Working with the file system&lt;a class="anchor-link" href="#Working-with-the-file-system"&gt;&amp;#182;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;code&gt;%ls&lt;/code&gt; lists files in the directory where your notebook is stored:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[28]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;ls&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;3foos.py              command_line_intro.ipynb  pos_tagging.ipynb    zipf.ipynb
classification.ipynb  foo.py                    regex.ipynb
cmudict.ipynb         jupyter_magic.ipynb       unicode.ipynb
collocations.ipynb    libraries.ipynb           xcorr_vs_conv.ipynb
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;If you provide a path as argument, it lists that directory instead:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[29]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;ls&lt;/span&gt; /etc/nginx
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;&lt;span class="ansi-blue-intense-fg ansi-bold"&gt;conf.d&lt;/span&gt;/         koi-utf     nginx.conf    &lt;span class="ansi-blue-intense-fg ansi-bold"&gt;sites-available&lt;/span&gt;/  uwsgi_params
fastcgi.conf    koi-win     proxy_params  &lt;span class="ansi-blue-intense-fg ansi-bold"&gt;sites-enabled&lt;/span&gt;/    win-utf
fastcgi_params  mime.types  scgi_params   &lt;span class="ansi-blue-intense-fg ansi-bold"&gt;snippets&lt;/span&gt;/
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;If you provide a &lt;a href="https://en.wikipedia.org/wiki/Glob_%28programming%29"&gt;glob pattern&lt;/a&gt;, then only files that match it are listed:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[30]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;ls&lt;/span&gt; /etc/nginx/*.conf
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;/etc/nginx/fastcgi.conf  /etc/nginx/nginx.conf
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;&lt;code&gt;%ll&lt;/code&gt; ("long listing") formats the listing as one entry per line with columns providing additional information:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[31]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;ll&lt;/span&gt; ~/edu/
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;total 12805
drwxrwsrwt+  3 lukes 2000147 Oct  4 18:52 &lt;span class="ansi-black-fg ansi-green-bg"&gt;exchange&lt;/span&gt;/
drwxrwsr-x+ 21 lukes 2041640 Oct 24 14:44 &lt;span class="ansi-blue-intense-fg ansi-bold"&gt;lukes&lt;/span&gt;/
drwxrwsr-x+  9 lukes 2060567 Dec 18 21:54 &lt;span class="ansi-blue-intense-fg ansi-bold"&gt;mda&lt;/span&gt;/
drwxrwsr-x+ 14 lukes 3001102 Oct 31 17:39 &lt;span class="ansi-blue-intense-fg ansi-bold"&gt;python&lt;/span&gt;/
drwxrwsr-x+  4 lukes 2004559 Feb 23  2017 &lt;span class="ansi-blue-intense-fg ansi-bold"&gt;r&lt;/span&gt;/
drwxr-sr-x+  4 lukes 2002420 Mar  9  2017 &lt;span class="ansi-blue-intense-fg ansi-bold"&gt;textlink&lt;/span&gt;/
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;One of those columns indicates file size, which is great, but they're in bytes, which is less great (hard to read at a glance). The &lt;code&gt;-h&lt;/code&gt; option makes the file sizes print in human-readable format:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[32]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;ll&lt;/span&gt; -h ~/edu/python/syn*
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;-rw-rw-r--+ 1 lukes 1.5G Nov  1  2016 /home/lukes/edu/python/syn2015.gz
-rw-rw-r--+ 1 lukes 112M Nov  2  2016 /home/lukes/edu/python/syn2015_sample
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;&lt;code&gt;%%writefile&lt;/code&gt; writes the contents of a cell to a file:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[33]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%%&lt;/span&gt;&lt;span class="k"&gt;writefile&lt;/span&gt; foo.py

def foo():
    &amp;quot;This foo function returns bar.&amp;quot;
    return &amp;quot;bar&amp;quot;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;Writing foo.py
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;&lt;code&gt;%cat&lt;/code&gt; prints the contents of a file into the notebook:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[34]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;cat&lt;/span&gt; foo.py
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;
def foo():
    &amp;#34;This foo function returns bar.&amp;#34;
    return &amp;#34;bar&amp;#34;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;&lt;code&gt;%cat&lt;/code&gt; is called &lt;code&gt;%cat&lt;/code&gt; because it can also con&lt;strong&gt;cat&lt;/strong&gt;enate multiple files (or the same file, multiple times):&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[35]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;cat&lt;/span&gt; foo.py foo.py
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;
def foo():
    &amp;#34;This foo function returns bar.&amp;#34;
    return &amp;#34;bar&amp;#34;
def foo():
    &amp;#34;This foo function returns bar.&amp;#34;
    return &amp;#34;bar&amp;#34;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;The output of &lt;code&gt;%cat&lt;/code&gt; can be saved into a file with &lt;code&gt;&amp;gt;&lt;/code&gt; (if the file exists, it's overwritten):&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[36]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;cat&lt;/span&gt; foo.py foo.py &amp;gt;3foos.py
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[37]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;cat&lt;/span&gt; 3foos.py
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;
def foo():
    &amp;#34;This foo function returns bar.&amp;#34;
    return &amp;#34;bar&amp;#34;
def foo():
    &amp;#34;This foo function returns bar.&amp;#34;
    return &amp;#34;bar&amp;#34;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Hey! Our &lt;code&gt;3foos.py&lt;/code&gt; is one foo short. Let's add it by &lt;strong&gt;appending&lt;/strong&gt; to the file with &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt;:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[38]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;cat&lt;/span&gt; foo.py &amp;gt;&amp;gt;3foos.py
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[39]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;cat&lt;/span&gt; 3foos.py
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;
def foo():
    &amp;#34;This foo function returns bar.&amp;#34;
    return &amp;#34;bar&amp;#34;
def foo():
    &amp;#34;This foo function returns bar.&amp;#34;
    return &amp;#34;bar&amp;#34;
def foo():
    &amp;#34;This foo function returns bar.&amp;#34;
    return &amp;#34;bar&amp;#34;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;There, much better.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;%less&lt;/code&gt; opens a file in the pager (with nice syntax highlighting if it's a Python source file):&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[40]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;less&lt;/span&gt; foo.py
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;&lt;code&gt;%less&lt;/code&gt; is named after the program &lt;code&gt;less&lt;/code&gt;, which is used to page through text files at the command line. Why is the original &lt;code&gt;less&lt;/code&gt; called "less"? Because an earlier pager program was called &lt;code&gt;more&lt;/code&gt; (as in "show me &lt;em&gt;more&lt;/em&gt; of this text file"), and as the saying goes, "less is more".&lt;/p&gt;
&lt;p&gt;(Programmers are fond of dad jokes. I like how this one works on multiple levels -- the literal meaning that &lt;code&gt;less&lt;/code&gt;-the-program is intended to replace &lt;code&gt;more&lt;/code&gt;-the-program interacts with the figurative meaning that having less is better than having more, and both coalesce into "use &lt;code&gt;less&lt;/code&gt; because it's better than &lt;code&gt;more&lt;/code&gt;".)&lt;/p&gt;
&lt;p&gt;&lt;code&gt;%cat&lt;/code&gt; and &lt;code&gt;%ls&lt;/code&gt; are also named after corresponding command line programs.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="Finding-out-more-about-your-code"&gt;Finding out more about your code&lt;a class="anchor-link" href="#Finding-out-more-about-your-code"&gt;&amp;#182;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;When developing, code often behaves differently from what you intended when you wrote it. The following tools might help you find out why.&lt;/p&gt;
&lt;p&gt;Timing the execution of a piece of code will help you determine if it's slowing you down. The &lt;code&gt;%timeit&lt;/code&gt; magic has your back, it runs your code repeatedly and thus provides more reliable estimates. It comes in both line and cell variants.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[41]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;timeit&lt;/span&gt; sorted(range(1_000_000))
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;61.4 ms ± 7.63 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[42]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%%&lt;/span&gt;&lt;span class="k"&gt;timeit&lt;/span&gt;
lst = list(range(1_000_000))
sorted(lst)
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;68.8 ms ± 7.57 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;The cell variant can include initialization code on the first line, which is run only once:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[43]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%%&lt;/span&gt;&lt;span class="k"&gt;timeit&lt;/span&gt; lst = list(range(1_000_000))
sorted(lst)
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;28.8 ms ± 4.84 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;If you have the &lt;a href="https://github.com/pythonprofilers/memory_profiler"&gt;memory_profiler&lt;/a&gt; library installed, you can load its magic extension and use &lt;code&gt;%memit&lt;/code&gt; in the same way as &lt;code&gt;%timeit&lt;/code&gt; to get a notion of how much memory your code is consuming.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[44]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;load_ext&lt;/span&gt; memory_profiler
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[45]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;memit&lt;/span&gt; list(range(1_000_000))
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;peak memory: 82.43 MiB, increment: 35.71 MiB
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;&lt;em&gt;Peak memory&lt;/em&gt; is the highest total amount of memory the Python process used when your code ran. &lt;em&gt;Increment&lt;/em&gt; is peak memory minus the amount of memory Python used &lt;em&gt;before&lt;/em&gt; your code ran.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[46]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%%&lt;/span&gt;&lt;span class="k"&gt;memit&lt;/span&gt;
lst = list(range(1_000_000))
even = [i for i in lst if i % 2 == 0]
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;peak memory: 127.82 MiB, increment: 73.29 MiB
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[47]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%%&lt;/span&gt;&lt;span class="k"&gt;memit&lt;/span&gt; lst = list(range(1_000_000))
even = [i for i in lst if i % 2 == 0]
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;peak memory: 98.02 MiB, increment: -30.69 MiB
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;If you have a more involved piece of code where multiple functions are called, you may need more granular information about running times than that provided by &lt;code&gt;%timeit&lt;/code&gt;. In that case, you can resort to &lt;strong&gt;profiling&lt;/strong&gt; using the &lt;code&gt;%prun&lt;/code&gt; magic. Profiling tells you how fast different parts of your code run relative to each other, in other words, where your bottlenecks are.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[48]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;really_slow&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;fast&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;pass&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;only_slow_because_it_calls_another_slow_function&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;fast&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;really_slow&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[49]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;prun&lt;/span&gt; only_slow_because_it_calls_another_slow_function()
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt; &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;The results show up in the pager, here's a copy:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;         7 function calls in 1.001 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    1.001    1.001    1.001    1.001 {built-in method time.sleep}
        1    0.000    0.000    1.001    1.001 {built-in method builtins.exec}
        1    0.000    0.000    1.001    1.001 &amp;lt;ipython-input-81-8d3b1f67a0d9&amp;gt;:3(really_slow)
        1    0.000    0.000    1.001    1.001 &amp;lt;ipython-input-81-8d3b1f67a0d9&amp;gt;:9(only_slow_because_it_calls_another_slow_function)
        1    0.000    0.000    1.001    1.001 &amp;lt;string&amp;gt;:1(&amp;lt;module&amp;gt;)
        1    0.000    0.000    0.000    0.000 &amp;lt;ipython-input-81-8d3b1f67a0d9&amp;gt;:6(fast)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;%prun&lt;/code&gt; also has a cell variant:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[50]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%%&lt;/span&gt;&lt;span class="k"&gt;prun&lt;/span&gt;
really_slow()
fast()
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt; &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;

&lt;pre&gt;&lt;code&gt;         6 function calls in 1.001 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    1.001    1.001    1.001    1.001 {built-in method time.sleep}
        1    0.000    0.000    1.001    1.001 {built-in method builtins.exec}
        1    0.000    0.000    1.001    1.001 &amp;lt;string&amp;gt;:2(&amp;lt;module&amp;gt;)
        1    0.000    0.000    1.001    1.001 &amp;lt;ipython-input-81-8d3b1f67a0d9&amp;gt;:3(really_slow)
        1    0.000    0.000    0.000    0.000 &amp;lt;ipython-input-81-8d3b1f67a0d9&amp;gt;:6(fast)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Perhaps the most useful magic for development is &lt;code&gt;%debug&lt;/code&gt;, which allows you to pause the execution of a piece of code, examine the variables which are defined at that moment in time, resume execution fully or step-by-step etc. You can either pass a statement that you want to debug as argument:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[51]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;printing&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[52]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;debug&lt;/span&gt; foo()
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;NOTE: Enter &amp;#39;c&amp;#39; at the ipdb&amp;gt;  prompt to continue execution.
&amp;gt; &lt;span class="ansi-green-fg"&gt;&amp;lt;string&amp;gt;&lt;/span&gt;(1)&lt;span class="ansi-cyan-fg"&gt;&amp;lt;module&amp;gt;&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;()&lt;/span&gt;

ipdb&amp;gt; help

Documented commands (type help &amp;lt;topic&amp;gt;):
========================================
EOF    cl         disable  interact  next    psource  rv         unt   
a      clear      display  j         p       q        s          until 
alias  commands   down     jump      pdef    quit     source     up    
args   condition  enable   l         pdoc    r        step       w     
b      cont       exit     list      pfile   restart  tbreak     whatis
break  continue   h        ll        pinfo   return   u          where 
bt     d          help     longlist  pinfo2  retval   unalias  
c      debug      ignore   n         pp      run      undisplay

Miscellaneous help topics:
==========================
exec  pdb

ipdb&amp;gt; step
--Call--
&amp;gt; &lt;span class="ansi-green-fg"&gt;&amp;lt;ipython-input-51-e20c0aea6cfb&amp;gt;&lt;/span&gt;(1)&lt;span class="ansi-cyan-fg"&gt;foo&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;()&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;----&amp;gt; 1 &lt;/span&gt;&lt;span class="ansi-green-fg"&gt;def&lt;/span&gt; foo&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;:&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;      2 &lt;/span&gt;&lt;span class="ansi-red-fg"&gt;    &lt;/span&gt;&lt;span class="ansi-green-fg"&gt;for&lt;/span&gt; i &lt;span class="ansi-green-fg"&gt;in&lt;/span&gt; range&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-cyan-fg"&gt;10&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;:&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;      3 &lt;/span&gt;&lt;span class="ansi-red-fg"&gt;        &lt;/span&gt;print&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;&amp;#34;printing&amp;#34;&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;,&lt;/span&gt; i&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;

ipdb&amp;gt; next
&amp;gt; &lt;span class="ansi-green-fg"&gt;&amp;lt;ipython-input-51-e20c0aea6cfb&amp;gt;&lt;/span&gt;(2)&lt;span class="ansi-cyan-fg"&gt;foo&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;()&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;      1 &lt;/span&gt;&lt;span class="ansi-green-fg"&gt;def&lt;/span&gt; foo&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;:&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;----&amp;gt; 2 &lt;/span&gt;&lt;span class="ansi-red-fg"&gt;    &lt;/span&gt;&lt;span class="ansi-green-fg"&gt;for&lt;/span&gt; i &lt;span class="ansi-green-fg"&gt;in&lt;/span&gt; range&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-cyan-fg"&gt;10&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;:&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;      3 &lt;/span&gt;&lt;span class="ansi-red-fg"&gt;        &lt;/span&gt;print&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;&amp;#34;printing&amp;#34;&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;,&lt;/span&gt; i&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;

ipdb&amp;gt; next
&amp;gt; &lt;span class="ansi-green-fg"&gt;&amp;lt;ipython-input-51-e20c0aea6cfb&amp;gt;&lt;/span&gt;(3)&lt;span class="ansi-cyan-fg"&gt;foo&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;()&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;      1 &lt;/span&gt;&lt;span class="ansi-green-fg"&gt;def&lt;/span&gt; foo&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;:&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;      2 &lt;/span&gt;&lt;span class="ansi-red-fg"&gt;    &lt;/span&gt;&lt;span class="ansi-green-fg"&gt;for&lt;/span&gt; i &lt;span class="ansi-green-fg"&gt;in&lt;/span&gt; range&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-cyan-fg"&gt;10&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;:&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;----&amp;gt; 3 &lt;/span&gt;&lt;span class="ansi-red-fg"&gt;        &lt;/span&gt;print&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;&amp;#34;printing&amp;#34;&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;,&lt;/span&gt; i&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;

ipdb&amp;gt; i
0
ipdb&amp;gt; next
printing 0
&amp;gt; &lt;span class="ansi-green-fg"&gt;&amp;lt;ipython-input-51-e20c0aea6cfb&amp;gt;&lt;/span&gt;(2)&lt;span class="ansi-cyan-fg"&gt;foo&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;()&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;      1 &lt;/span&gt;&lt;span class="ansi-green-fg"&gt;def&lt;/span&gt; foo&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;:&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;----&amp;gt; 2 &lt;/span&gt;&lt;span class="ansi-red-fg"&gt;    &lt;/span&gt;&lt;span class="ansi-green-fg"&gt;for&lt;/span&gt; i &lt;span class="ansi-green-fg"&gt;in&lt;/span&gt; range&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-cyan-fg"&gt;10&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;:&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;      3 &lt;/span&gt;&lt;span class="ansi-red-fg"&gt;        &lt;/span&gt;print&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;&amp;#34;printing&amp;#34;&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;,&lt;/span&gt; i&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;

ipdb&amp;gt; next
&amp;gt; &lt;span class="ansi-green-fg"&gt;&amp;lt;ipython-input-51-e20c0aea6cfb&amp;gt;&lt;/span&gt;(3)&lt;span class="ansi-cyan-fg"&gt;foo&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;()&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;      1 &lt;/span&gt;&lt;span class="ansi-green-fg"&gt;def&lt;/span&gt; foo&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;:&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;      2 &lt;/span&gt;&lt;span class="ansi-red-fg"&gt;    &lt;/span&gt;&lt;span class="ansi-green-fg"&gt;for&lt;/span&gt; i &lt;span class="ansi-green-fg"&gt;in&lt;/span&gt; range&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-cyan-fg"&gt;10&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;:&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;----&amp;gt; 3 &lt;/span&gt;&lt;span class="ansi-red-fg"&gt;        &lt;/span&gt;print&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;&amp;#34;printing&amp;#34;&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;,&lt;/span&gt; i&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;

ipdb&amp;gt; i
1
ipdb&amp;gt; quit
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Or you can invoke plain &lt;code&gt;%debug&lt;/code&gt; after an exception has been raised to jump directly to the place where the error occurred, so that you can figure out why things went wrong:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[53]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;dct&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;dct&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;bar&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[54]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_text output_error"&gt;
&lt;pre&gt;
&lt;span class="ansi-red-fg"&gt;---------------------------------------------------------------------------&lt;/span&gt;
&lt;span class="ansi-red-fg"&gt;KeyError&lt;/span&gt;                                  Traceback (most recent call last)
&lt;span class="ansi-green-fg"&gt;&amp;lt;ipython-input-54-c19b6d9633cf&amp;gt;&lt;/span&gt; in &lt;span class="ansi-cyan-fg"&gt;&amp;lt;module&amp;gt;&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;()&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;----&amp;gt; 1&lt;/span&gt;&lt;span class="ansi-red-fg"&gt; &lt;/span&gt;foo&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;

&lt;span class="ansi-green-fg"&gt;&amp;lt;ipython-input-53-29ed6ce0c4f1&amp;gt;&lt;/span&gt; in &lt;span class="ansi-cyan-fg"&gt;foo&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;()&lt;/span&gt;
&lt;span class="ansi-green-intense-fg ansi-bold"&gt;      1&lt;/span&gt; &lt;span class="ansi-green-fg"&gt;def&lt;/span&gt; foo&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;:&lt;/span&gt;
&lt;span class="ansi-green-intense-fg ansi-bold"&gt;      2&lt;/span&gt;     dct &lt;span class="ansi-blue-fg"&gt;=&lt;/span&gt; dict&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;foo&lt;span class="ansi-blue-fg"&gt;=&lt;/span&gt;&lt;span class="ansi-cyan-fg"&gt;1&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;----&amp;gt; 3&lt;/span&gt;&lt;span class="ansi-red-fg"&gt;     &lt;/span&gt;&lt;span class="ansi-green-fg"&gt;return&lt;/span&gt; dct&lt;span class="ansi-blue-fg"&gt;[&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;&amp;#34;bar&amp;#34;&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;]&lt;/span&gt;

&lt;span class="ansi-red-fg"&gt;KeyError&lt;/span&gt;: &amp;#39;bar&amp;#39;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[55]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;debug&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;&amp;gt; &lt;span class="ansi-green-fg"&gt;&amp;lt;ipython-input-53-29ed6ce0c4f1&amp;gt;&lt;/span&gt;(3)&lt;span class="ansi-cyan-fg"&gt;foo&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;()&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;      1 &lt;/span&gt;&lt;span class="ansi-green-fg"&gt;def&lt;/span&gt; foo&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;:&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;      2 &lt;/span&gt;&lt;span class="ansi-red-fg"&gt;    &lt;/span&gt;dct &lt;span class="ansi-blue-fg"&gt;=&lt;/span&gt; dict&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;foo&lt;span class="ansi-blue-fg"&gt;=&lt;/span&gt;&lt;span class="ansi-cyan-fg"&gt;1&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;----&amp;gt; 3 &lt;/span&gt;&lt;span class="ansi-red-fg"&gt;    &lt;/span&gt;&lt;span class="ansi-green-fg"&gt;return&lt;/span&gt; dct&lt;span class="ansi-blue-fg"&gt;[&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;&amp;#34;bar&amp;#34;&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;]&lt;/span&gt;

ipdb&amp;gt; &amp;#34;bar&amp;#34; in dct
False
ipdb&amp;gt; dct.keys()
dict_keys([&amp;#39;foo&amp;#39;])
ipdb&amp;gt; quit
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;If you want to pause one of your functions and explore its state at a particular point, set a &lt;em&gt;breakpoint&lt;/em&gt; using the &lt;code&gt;set_trace()&lt;/code&gt; function from the &lt;code&gt;IPython.core.debugger&lt;/code&gt; module. The debugger will be automatically invoked when the call to &lt;code&gt;set_trace()&lt;/code&gt; is reached during execution:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[56]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;IPython.core.debugger&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;set_trace&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;set_trace&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;printing&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[57]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;&amp;gt; &lt;span class="ansi-green-fg"&gt;&amp;lt;ipython-input-56-805417d84ad8&amp;gt;&lt;/span&gt;(6)&lt;span class="ansi-cyan-fg"&gt;foo&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;()&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;      2 &lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;      3 &lt;/span&gt;&lt;span class="ansi-green-fg"&gt;def&lt;/span&gt; foo&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;:&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;      4 &lt;/span&gt;&lt;span class="ansi-red-fg"&gt;    &lt;/span&gt;&lt;span class="ansi-green-fg"&gt;for&lt;/span&gt; i &lt;span class="ansi-green-fg"&gt;in&lt;/span&gt; range&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-cyan-fg"&gt;2&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;:&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;      5 &lt;/span&gt;&lt;span class="ansi-red-fg"&gt;        &lt;/span&gt;set_trace&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;----&amp;gt; 6 &lt;/span&gt;&lt;span class="ansi-red-fg"&gt;        &lt;/span&gt;print&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;&amp;#34;printing&amp;#34;&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;,&lt;/span&gt; i&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;

ipdb&amp;gt; i
0
ipdb&amp;gt; continue
printing 0
&amp;gt; &lt;span class="ansi-green-fg"&gt;&amp;lt;ipython-input-56-805417d84ad8&amp;gt;&lt;/span&gt;(5)&lt;span class="ansi-cyan-fg"&gt;foo&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;()&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;      2 &lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;      3 &lt;/span&gt;&lt;span class="ansi-green-fg"&gt;def&lt;/span&gt; foo&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;:&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;      4 &lt;/span&gt;&lt;span class="ansi-red-fg"&gt;    &lt;/span&gt;&lt;span class="ansi-green-fg"&gt;for&lt;/span&gt; i &lt;span class="ansi-green-fg"&gt;in&lt;/span&gt; range&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-cyan-fg"&gt;2&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;:&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;----&amp;gt; 5 &lt;/span&gt;&lt;span class="ansi-red-fg"&gt;        &lt;/span&gt;set_trace&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;
&lt;span class="ansi-green-fg"&gt;      6 &lt;/span&gt;&lt;span class="ansi-red-fg"&gt;        &lt;/span&gt;print&lt;span class="ansi-blue-fg"&gt;(&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;&amp;#34;printing&amp;#34;&lt;/span&gt;&lt;span class="ansi-blue-fg"&gt;,&lt;/span&gt; i&lt;span class="ansi-blue-fg"&gt;)&lt;/span&gt;

ipdb&amp;gt; i
1
ipdb&amp;gt; continue
printing 1
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;The Python debugger is called &lt;code&gt;pdb&lt;/code&gt; and it has some special commands of its own which allow you to step through the execution. They can be listed by typing &lt;code&gt;help&lt;/code&gt; at the debugger prompt (see above), or you can have a look at the &lt;a href="https://docs.python.org/3/library/pdb.html#debugger-commands"&gt;documentation&lt;/a&gt;. The examples above also illustrate what a typical debugging session looks like (stepping through the program, inspecting variables). When you want to stop debugging, don't forget to &lt;strong&gt;quit the debugger&lt;/strong&gt; with &lt;code&gt;quit&lt;/code&gt; (or just &lt;code&gt;q&lt;/code&gt;) at the debugger prompt, or else your Python process will become unresponsive.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="Plotting"&gt;Plotting&lt;a class="anchor-link" href="#Plotting"&gt;&amp;#182;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Jupyter is tightly integrated with the &lt;a href="https://matplotlib.org/"&gt;matplotlib&lt;/a&gt; plotting library. Plotting is enabled by running the &lt;code&gt;%matplotlib&lt;/code&gt; magic with an argument specifying how the notebook should handle graphical output. &lt;code&gt;%matplotlib notebook&lt;/code&gt; will generate an interactive plot which you can resize, pan, zoom and more. A word of caution though: when using this variant, once you're &lt;strong&gt;done with the plot&lt;/strong&gt;, don't forget to &lt;strong&gt;"freeze" it using the ⏻ symbol&lt;/strong&gt; in the upper right corner, or else subsequent plotting commands from different cells will all draw into this same plot.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[58]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;matplotlib&lt;/span&gt; notebook
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[59]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[60]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;





&lt;div id="c0d0a0da-7a25-4d4d-a841-742c9fdf0a3b"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_javascript "&gt;
&lt;script type="text/javascript"&gt;
var element = $('#c0d0a0da-7a25-4d4d-a841-742c9fdf0a3b');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('&lt;div/&gt;');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '&lt;div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/&gt;');
    var titletext = $(
        '&lt;div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/&gt;');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('&lt;div/&gt;');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('&lt;canvas/&gt;');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('&lt;canvas/&gt;');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY &lt; 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('&lt;button/&gt;');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('&lt;span/&gt;');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('&lt;span/&gt;');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('&lt;span/&gt;');

    var fmt_picker = $('&lt;select/&gt;');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '&lt;option/&gt;', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('&lt;span class="mpl-message"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' &amp;&amp; evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey &amp;&amp; event.which != 17)
        value += "ctrl+";
    if (event.altKey &amp;&amp; event.which != 18)
        value += "alt+";
    if (event.shiftKey &amp;&amp; event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "pdf", "png", "ps", "raw", "svg"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket-&gt;open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("&lt;div id='" + id + "'&gt;&lt;/div&gt;");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('&lt;img src="' + dataURL + '" width="' + width + '"&gt;');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '&lt;img src="' + dataURL + '" width="' + width + '"&gt;';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('&lt;button class="btn btn-default" href="#" title="' + name + '"&gt;&lt;i class="fa ' + image + ' fa-lg"&gt;&lt;/i&gt;&lt;/button&gt;');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('&lt;span class="mpl-message" style="text-align:right; float: right;"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('&lt;div class="btn-group inline pull-right"&gt;&lt;/div&gt;');
    var button = $('&lt;button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"&gt;&lt;i class="fa fa-power-off icon-remove icon-large"&gt;&lt;/i&gt;&lt;/button&gt;');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey &amp;&amp; event.which == 13) {
        this.canvas_div.blur();
        // select the cell after this one
        var index = IPython.notebook.find_cell_index(this.cell_info[0]);
        IPython.notebook.select(index + 1);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i&lt;ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j&lt;cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython &gt;= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

&lt;/script&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;



&lt;div class="output_html rendered_html output_subarea "&gt;
&lt;img src="data:image/png;base64,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" width="640"&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt output_prompt"&gt;Out[60]:&lt;/div&gt;




&lt;div class="output_text output_subarea output_execute_result"&gt;
&lt;pre&gt;[&amp;lt;matplotlib.lines.Line2D at 0x7ff8e9b94518&amp;gt;]&lt;/pre&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;By contrast, &lt;code&gt;%matplotlib inline&lt;/code&gt; will just show a basic plot with a default size:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[61]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;matplotlib&lt;/span&gt; inline
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[62]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt output_prompt"&gt;Out[62]:&lt;/div&gt;




&lt;div class="output_text output_subarea output_execute_result"&gt;
&lt;pre&gt;[&amp;lt;matplotlib.lines.Line2D at 0x7ff8e9afa358&amp;gt;]&lt;/pre&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;




&lt;div class="output_png output_subarea "&gt;
&lt;img src="data:image/png;base64,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
"
&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;For more information on plotting with matplotlib, see their &lt;a href="https://matplotlib.org/2.1.1/tutorials/introductory/usage.html"&gt;usage guide&lt;/a&gt;.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="Command-line-programs"&gt;Command line programs&lt;a class="anchor-link" href="#Command-line-programs"&gt;&amp;#182;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;The operations listed in the section on magics for working with the file system can of course also be achieved using the corresponding command line programs, so if you know those, no need to memorize the magics. In fact, the magics are often just thin wrappers around the command line programs, which is why they are named the same.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[63]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;ls --color -hArtl /etc/nginx
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;total 56K
-rw-r--r-- 1 root root 3.0K Mar 30  2016 win-utf
-rw-r--r-- 1 root root  664 Mar 30  2016 uwsgi_params
-rw-r--r-- 1 root root  636 Mar 30  2016 scgi_params
-rw-r--r-- 1 root root  180 Mar 30  2016 proxy_params
-rw-r--r-- 1 root root 3.9K Mar 30  2016 mime.types
-rw-r--r-- 1 root root 2.2K Mar 30  2016 koi-win
-rw-r--r-- 1 root root 2.8K Mar 30  2016 koi-utf
-rw-r--r-- 1 root root 1007 Mar 30  2016 fastcgi_params
-rw-r--r-- 1 root root 1.1K Mar 30  2016 fastcgi.conf
drwxr-xr-x 2 root root 4.0K Apr 26  2016 &lt;span class="ansi-blue-intense-fg ansi-bold"&gt;conf.d&lt;/span&gt;
-rw-r--r-- 1 root root 1.5K Apr 27  2016 nginx.conf
drwxr-xr-x 2 root root 4.0K Apr 27  2016 &lt;span class="ansi-blue-intense-fg ansi-bold"&gt;sites-enabled&lt;/span&gt;
drwxr-xr-x 2 root root 4.0K Aug 15 09:21 &lt;span class="ansi-blue-intense-fg ansi-bold"&gt;sites-available&lt;/span&gt;
drwxr-xr-x 2 root root 4.0K Aug 15 09:21 &lt;span class="ansi-blue-intense-fg ansi-bold"&gt;snippets&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;The only functionality that I miss among the magics is the ability to take a quick look at part of a possibly very large text file. This can be done with the &lt;code&gt;head&lt;/code&gt; command line program, which prints the beginning of a file:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[64]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;head jupyter_magic.ipynb
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;{
 &amp;#34;cells&amp;#34;: [
  {
   &amp;#34;cell_type&amp;#34;: &amp;#34;markdown&amp;#34;,
   &amp;#34;metadata&amp;#34;: {},
   &amp;#34;source&amp;#34;: [
    &amp;#34;# Make the most of Python Jupyter notebooks\n&amp;#34;,
    &amp;#34;\n&amp;#34;,
    &amp;#34;[![Binder](https://mybinder.org/badge.svg)](https://mybinder.org/v2/gh/dlukes/dlukes.github.io/source?filepath=content%2Fnotebooks%2Fjupyter_magic.ipynb)\n&amp;#34;,
    &amp;#34;\n&amp;#34;,
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;The &lt;code&gt;-n&lt;/code&gt; option controls how many lines from the beginning of the file should be printed:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[65]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;head -n3 jupyter_magic.ipynb regex.ipynb
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;==&amp;gt; jupyter_magic.ipynb &amp;lt;==
{
 &amp;#34;cells&amp;#34;: [
  {

==&amp;gt; regex.ipynb &amp;lt;==
{
 &amp;#34;cells&amp;#34;: [
  {
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Similarly, the &lt;code&gt;tail&lt;/code&gt; program prints endings of files:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[66]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;tail -n5 jupyter_magic.ipynb
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;  }
 },
 &amp;#34;nbformat&amp;#34;: 4,
 &amp;#34;nbformat_minor&amp;#34;: 2
}
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Another useful feature of command line execution is that instead of &lt;em&gt;printing&lt;/em&gt; the result, you can have it &lt;em&gt;returned&lt;/em&gt; as a list of strings corresponding to lines of output. Either by prepending two exclamation marks instead of one:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[67]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;!!&lt;/span&gt;tail -n5 jupyter_magic.ipynb
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt output_prompt"&gt;Out[67]:&lt;/div&gt;




&lt;div class="output_text output_subarea output_execute_result"&gt;
&lt;pre&gt;[&amp;#39;  }&amp;#39;, &amp;#39; },&amp;#39;, &amp;#39; &amp;#34;nbformat&amp;#34;: 4,&amp;#39;, &amp;#39; &amp;#34;nbformat_minor&amp;#34;: 2&amp;#39;, &amp;#39;}&amp;#39;]&lt;/pre&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Or by assigning the expression to a variable:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[68]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;tail -n5 jupyter_magic.ipynb
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[69]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt output_prompt"&gt;Out[69]:&lt;/div&gt;




&lt;div class="output_text output_subarea output_execute_result"&gt;
&lt;pre&gt;[&amp;#39;  }&amp;#39;, &amp;#39; },&amp;#39;, &amp;#39; &amp;#34;nbformat&amp;#34;: 4,&amp;#39;, &amp;#39; &amp;#34;nbformat_minor&amp;#34;: 2&amp;#39;, &amp;#39;}&amp;#39;]&lt;/pre&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="In-summary"&gt;In summary&lt;a class="anchor-link" href="#In-summary"&gt;&amp;#182;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;These are just my favorite shortcuts, the ones I find most helpful. Obviously, there are many more, see &lt;code&gt;%magic&lt;/code&gt; or &lt;code&gt;%quickref&lt;/code&gt;. If you think I've missed a really neat one, let me know!&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
 

&lt;/p&gt;</content><category term="python"></category><category term="jupyter"></category><category term="programming"></category></entry><entry><title>Monkey-patching in R</title><link href="https://dlukes.github.io/monkey-patching-in-r.html" rel="alternate"></link><published>2017-10-24T00:00:00+02:00</published><updated>2017-10-24T00:00:00+02:00</updated><author><name>dlukes</name></author><id>tag:dlukes.github.io,2017-10-24:/monkey-patching-in-r.html</id><summary type="html">&lt;p&gt;How to monkey-patch functions in imported libraries in R.&lt;/p&gt;</summary><content type="html">&lt;p&gt;While building a &lt;a href="https://shiny.rstudio.com/"&gt;Shiny&lt;/a&gt; application with R recently, I've come across the need
to invert the &lt;code&gt;filterRange()&lt;/code&gt; function in the &lt;a href="https://rstudio.github.io/DT/"&gt;DT&lt;/a&gt; package, which provides a
convenient high-level way to add &lt;a href="https://datatables.net/"&gt;DataTables&lt;/a&gt; to your Shiny app. As indicated
by its name, this function filters a numeric column in your datatable based on
a range, so as it contains only values contained &lt;strong&gt;within that range&lt;/strong&gt;. What I
needed was the opposite: include values &lt;strong&gt;outside the specified range&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;The filtering is done server-side and unfortunately, no option is provided
out-of-the-box to perform this inversion. One of the solutions is therefore to
monkey-patch the &lt;code&gt;filterRange()&lt;/code&gt; function in the &lt;code&gt;DT&lt;/code&gt; R package, replacing it
with a version that filters the outer range instead.&lt;/p&gt;
&lt;p&gt;Googling for "monkey patching r" (currently) yields this &lt;a href="https://www.r-bloggers.com/an-example-of-monkey-patching-a-package/"&gt;blog post&lt;/a&gt;,
which provides a more complicated though arguably cleaner solution, which
introduces a new environment in the search path. My position on this is that if
you're worried about cleanliness, you shouldn't be monkey-patching in the first
place. Conversely, if you decide monkey-patching is acceptable in your
situation, the code required should be as quick and dirty as the thought.&lt;/p&gt;
&lt;p&gt;Of course, this is R, uncontested king of weird ways of doing anything but the
most common data analysis tasks, and even some of those -- so it's never going
to be as simple as Python, for instance:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stdin&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;foo&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# Aaand done.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;But it doesn't have to be as complicated as the solution in the blog post
above, either.&lt;/p&gt;
&lt;p&gt;The solution presented here is basically taken from &lt;a href="https://stat.ethz.ch/pipermail/r-help/2008-August/171217.html"&gt;this mailing list
post&lt;/a&gt;, which has the disadvantage of not containing the key term
"monkey-patch", which makes it hard to find on Google. It consists in the
following steps:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Get a handle on the relevant library's namespace with &lt;code&gt;getNamespace()&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Make the relevant binding modifiable with &lt;code&gt;unlockBinding()&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Define your custom version of the function.&lt;/li&gt;
&lt;li&gt;Store it in the namespace under the original name.&lt;/li&gt;
&lt;li&gt;Re-seal everything with &lt;code&gt;lockBinding()&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Here's the code for my specific use case with &lt;code&gt;DT::filterRange()&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Monkey patch the filterRange() function in the DT package so that server-side filtering returns&lt;/span&gt;
&lt;span class="c1"&gt;# values *outside* the range instead of inside.&lt;/span&gt;

DT &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="kp"&gt;getNamespace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;DT&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kp"&gt;unlockBinding&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;filterRange&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; DT&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;####################################################################################################&lt;/span&gt;
&lt;span class="c1"&gt;# This part of the code is deliberately kept as similar to the original as possible, in order to&lt;/span&gt;
&lt;span class="c1"&gt;# make potential updates easier. See https://github.com/rstudio/DT/blob/v0.2/R/shiny.R#L474.&lt;/span&gt;

&lt;span class="c1"&gt;# filter a numeric/date/time vector using the search string &amp;quot;lower ... upper&amp;quot;&lt;/span&gt;
filterRange &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kr"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;d&lt;span class="p"&gt;,&lt;/span&gt; string&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="kp"&gt;grepl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;[.]{3}&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; string&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="kp"&gt;length&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;r &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="kp"&gt;strsplit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;string&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;[.]{3}&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)[[&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]])&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="kp"&gt;stop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;The range of a numeric / date / time column must be of length 2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kp"&gt;length&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;r&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; r &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kt"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;r&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# lower,&lt;/span&gt;
  r &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kp"&gt;gsub&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;^\\s+|\\s+$&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; r&lt;span class="p"&gt;)&lt;/span&gt;
  r1 &lt;span class="o"&gt;=&lt;/span&gt; r&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt; r2 &lt;span class="o"&gt;=&lt;/span&gt; r&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
  &lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kp"&gt;is.numeric&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;d&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    r1 &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kp"&gt;as.numeric&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;r1&lt;span class="p"&gt;);&lt;/span&gt; r2 &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kp"&gt;as.numeric&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;r2&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="kr"&gt;else&lt;/span&gt; &lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kp"&gt;inherits&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;d&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;Date&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;r1 &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; r1 &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kp"&gt;as.Date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;r1&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;r2 &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; r2 &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kp"&gt;as.Date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;r2&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="kr"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;r1 &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; r1 &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kp"&gt;as.POSIXct&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;r1&lt;span class="p"&gt;,&lt;/span&gt; tz &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;GMT&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;%Y-%m-%dT%H:%M:%S&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;r2 &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; r2 &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kp"&gt;as.POSIXct&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;r2&lt;span class="p"&gt;,&lt;/span&gt; tz &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;GMT&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;%Y-%m-%dT%H:%M:%S&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;r&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="kr"&gt;return&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;d &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; r2&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;r&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="kr"&gt;return&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;d &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; r1&lt;span class="p"&gt;)&lt;/span&gt;
  d &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; r1 &lt;span class="o"&gt;|&lt;/span&gt; d &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; r2
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;# End pastiche of original DT code.&lt;/span&gt;
&lt;span class="c1"&gt;####################################################################################################&lt;/span&gt;

DT&lt;span class="o"&gt;$&lt;/span&gt;filterRange &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; filterRange
&lt;span class="kp"&gt;lockBinding&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;filterRange&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; DT&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The last piece of the puzzle concerns UX: the user should understand that the
filter applies to the outer range, not the inner one. Visually:&lt;/p&gt;
&lt;p&gt;&lt;img alt="switch inner to outer range" src="images/inner-to-outer-range.png"&gt;&lt;/p&gt;
&lt;p&gt;This is easily achieved with a few lines of CSS:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;#&lt;/span&gt;&lt;span class="nn"&gt;datatable-id&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;noUi-background&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;background&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mh"&gt;#3FB8AF&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;box-shadow&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;inset&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt; &lt;span class="nb"&gt;rgba&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;51&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;51&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;51&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;.45&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;transition&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;background&lt;/span&gt; &lt;span class="mi"&gt;450&lt;/span&gt;&lt;span class="kt"&gt;ms&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="p"&gt;#&lt;/span&gt;&lt;span class="nn"&gt;datatable-id&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;noUi-connect&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;background&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mh"&gt;#FAFAFA&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;box-shadow&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;inset&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt; &lt;span class="mh"&gt;#f0f0f0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In conclusion, monkey-patching is rarely the most elegant, debuggable and
maintainable solution to a problem you're having. More often, it's actually
&lt;em&gt;the least&lt;/em&gt; elegant (etc.) one. But every once in a while, it's the simplest
one, the one with the best hassle/reward ratio (until it comes back to bite you
once your codebase has grown or assumptions about the monkey-patched code have
changed). At any rate, if you need to resort to it, it's nice to have a quick,
googlable how-to, hence this post.&lt;/p&gt;</content><category term="floss"></category><category term="hack"></category><category term="r"></category><category term="monkey-patching"></category></entry><entry><title>"Responsive" iframes, e.g. for DokuWiki and Shiny</title><link href="https://dlukes.github.io/responsive-iframe.html" rel="alternate"></link><published>2016-09-29T00:00:00+02:00</published><updated>2016-09-29T00:00:00+02:00</updated><author><name>dlukes</name></author><id>tag:dlukes.github.io,2016-09-29:/responsive-iframe.html</id><summary type="html">&lt;p&gt;How to embed a "responsive" (i.e. vertically resizing) iframe in a web page.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Sometimes, the best way to embed an interactive element into a website is to use
an iframe. Obviously, not when your website is a webapp and that element
represents the main functionality it's supposed to provide -- that would be
gross. But when your website is mostly textual / graphical content, typically
authored within a wiki or blogging platform, and you just want to include this
one element to liven it up, iframes are actually a decent (and perhaps the
only?) solution.&lt;/p&gt;
&lt;p&gt;Trouble is, you probably want this Frankenstein monster to actually look good,
i.e. seamless if at all possible. But iframes don't have automatic vertical
resizing according to their content, which means you'll need to take care of
that manually. How? By using the JavaScript messaging API for communication
between parent and child frames to send information about window resize events
(from parent to child) and height updates (from child to parent).&lt;/p&gt;
&lt;p&gt;Let's imagine you have a &lt;a href="https://www.dokuwiki.org/dokuwiki#"&gt;DokuWiki&lt;/a&gt; article
in which you want to embed a small &lt;a href="http://shiny.rstudio.com/"&gt;Shiny&lt;/a&gt; app. If
you just embed it in your dokuwiki code using an iframe, taking care to remove
the border and stretch it horizontally...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;iframe&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;embedded-app&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;src&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;https://your.shiny.app/url&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;frameborder&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;0&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;width&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;100%&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;iframe&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;... this will happen:&lt;/p&gt;
&lt;p&gt;&lt;img alt="non-responsive iframe" src="images/non_responsive.png"&gt;&lt;/p&gt;
&lt;p&gt;Eww, scrollbar. Messaging to the rescue! First of all, you need to teach your
embedded web page to send information about its height to the parent at
appropriate times. This can be achieved by adding this piece of JavaScript to
it:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="c1"&gt;////////////////////////////////////////////&lt;/span&gt;
  &lt;span class="c1"&gt;// CONFIGURE THESE TO MATCH YOUR USE CASE //&lt;/span&gt;
  &lt;span class="c1"&gt;////////////////////////////////////////////&lt;/span&gt;

  &lt;span class="c1"&gt;// set this to a selector for the element that contains the entire UI&lt;/span&gt;
  &lt;span class="c1"&gt;// you want to access via the iframe -- for a Shiny app, it might be&lt;/span&gt;
  &lt;span class="c1"&gt;// a div with Bootstrap&amp;#39;s container-fluid class&lt;/span&gt;
  &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;containerSelector&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;.container-fluid&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// this should be the root URL of the parent frame (DokuWiki) which you want&lt;/span&gt;
  &lt;span class="c1"&gt;// to allow to send messages to the child&lt;/span&gt;
  &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;allowedOrigin&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;https://dokuwiki.example.com&amp;quot;&lt;/span&gt;

  &lt;span class="c1"&gt;///////////////////////&lt;/span&gt;
  &lt;span class="c1"&gt;// END CONFIGURATION //&lt;/span&gt;
  &lt;span class="c1"&gt;///////////////////////&lt;/span&gt;

  &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;sendHeightOf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;querySelector&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;container&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;querySelector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;querySelector&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;container&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;scrollHeight&lt;/span&gt; &lt;span class="o"&gt;!==&lt;/span&gt; &lt;span class="kc"&gt;undefined&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;h&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;container&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;scrollHeight&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="nx"&gt;parent&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;postMessage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;*&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;No element corresponding to querySelector &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;querySelector&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                  &lt;span class="s2"&gt;&amp;quot; found, or element did not have property scrollHeight.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="c1"&gt;// cross-browser compatible infrastructure&lt;/span&gt;
  &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;eventMethod&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;window&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;addEventListener&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;addEventListener&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;attachEvent&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;eventer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;window&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;eventMethod&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;messageEvent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;eventMethod&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;attachEvent&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;onmessage&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;message&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// listen for resize message from parent window (see point ② below)&lt;/span&gt;
  &lt;span class="nx"&gt;eventer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;messageEvent&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;origin&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="nx"&gt;allowedOrigin&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nx"&gt;sendHeightOf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;containerSelector&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Was expecting a message from &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;allowedOrigin&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;, got &amp;quot;&lt;/span&gt;
                  &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;origin&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot; instead.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;});&lt;/span&gt;

  &lt;span class="nb"&gt;window&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;onload&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// inform parent at least once after load (see point ① below)&lt;/span&gt;
    &lt;span class="nx"&gt;sendHeightOf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;containerSelector&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="c1"&gt;// monitor self-initiated changes in size (see point ③ below)&lt;/span&gt;
    &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;mo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;MutationObserver&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nx"&gt;sendHeightOf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;containerSelector&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;});&lt;/span&gt;
    &lt;span class="nx"&gt;mo&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;observe&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;subtree&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;childList&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;characterData&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;});&lt;/span&gt;
  &lt;span class="p"&gt;};&lt;/span&gt;
&lt;span class="p"&gt;})();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;What are these "appropriate times" mentioned above? The code above implements
the following ones, which should be generic enough to cover most situations:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;on initial page load&lt;/li&gt;
&lt;li&gt;on window resize (see below, the parent frame has to send a message to the
   child frame that it has been resized, to which the child responds with a size
   update message)&lt;/li&gt;
&lt;li&gt;on any kind of mutation of the DOM inside the child frame (not a full reload
   of the entire page, that would be handled by point ① above), which might
   affect the size of the rendered component&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;On the parent (DokuWiki) side, you then need to handle the incoming size update
messages from the child frame, and send resize messages when the window is
resized. This can be achieved with the following DokuWiki markup:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;iframe&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;embedded-app&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;src&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;https://your.shiny.app/url&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;frameborder&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;0&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;width&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;100%&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;iframe&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;script&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="c1"&gt;////////////////////////////////////////////&lt;/span&gt;
  &lt;span class="c1"&gt;// CONFIGURE THESE TO MATCH YOUR USE CASE //&lt;/span&gt;
  &lt;span class="c1"&gt;////////////////////////////////////////////&lt;/span&gt;

  &lt;span class="c1"&gt;// this should be the root URL of the child frame (Shiny app) which you want&lt;/span&gt;
  &lt;span class="c1"&gt;// to allow to send messages to the parent&lt;/span&gt;
  &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;allowedOrigin&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;https://your.shiny.app&amp;quot;&lt;/span&gt;

  &lt;span class="c1"&gt;///////////////////////&lt;/span&gt;
  &lt;span class="c1"&gt;// END CONFIGURATION //&lt;/span&gt;
  &lt;span class="c1"&gt;///////////////////////&lt;/span&gt;

  &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;embeddedApp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getElementById&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;embedded-app&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;resizeIframe&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;pixels&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nx"&gt;embeddedApp&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;style&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;height&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;pixels&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;px&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="c1"&gt;// cross-browser compatible infrastructure&lt;/span&gt;
  &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;eventMethod&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;window&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;addEventListener&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;addEventListener&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;attachEvent&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;eventer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;window&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;eventMethod&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;messageEvent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;eventMethod&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;attachEvent&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;onmessage&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;message&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// listen to message from iframe&lt;/span&gt;
  &lt;span class="nx"&gt;eventer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;messageEvent&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;origin&lt;/span&gt; &lt;span class="o"&gt;===&lt;/span&gt; &lt;span class="nx"&gt;allowedOrigin&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;message&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;message&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;data&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;key&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
      &lt;span class="nx"&gt;resizeIframe&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Was expecting a message from &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;allowedOrigin&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;, got &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;origin&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot; instead.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="c1"&gt;// send message to iframe on window resize&lt;/span&gt;
  &lt;span class="nb"&gt;window&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;onresize&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;embeddedApp&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;contentWindow&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;postMessage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;parentWindowResized&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;*&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;};&lt;/span&gt;
&lt;span class="p"&gt;})();&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;script&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And the result?&lt;/p&gt;
&lt;p&gt;&lt;img alt="responsive iframe" src="images/responsive.png"&gt;&lt;/p&gt;
&lt;p&gt;Yay! And of course, the iframe gets resized as needed when display conditions
change:&lt;/p&gt;
&lt;p&gt;&lt;img alt="responsive iframe rearranged" src="images/responsive_rearranged.png"&gt;&lt;/p&gt;
&lt;p&gt;Cue bittersweet feeling after having figured out a workaround for such a
specific use case that you're &lt;a href="http://www.xkcd.com/1691/"&gt;not quite sure&lt;/a&gt; it was
worth putting all that effort into it in the first place...&lt;/p&gt;</content><category term="floss"></category><category term="javascript"></category><category term="html"></category><category term="iframe"></category><category term="dokuwiki"></category><category term="shiny"></category></entry><entry><title>Beyond semantic versioning? (cross-post)</title><link href="https://dlukes.github.io/beyond-semver.html" rel="alternate"></link><published>2014-12-14T00:00:00+01:00</published><updated>2014-12-14T00:00:00+01:00</updated><author><name>dlukes</name></author><id>tag:dlukes.github.io,2014-12-14:/beyond-semver.html</id><summary type="html">&lt;p&gt;Semantic versioning is a good idea, but it would be better to use an explicit keyword system to signal (non-)breaking changes in library versions.&lt;/p&gt;</summary><content type="html">&lt;h1&gt;Background&lt;/h1&gt;
&lt;p&gt;Ever since I first read about &lt;a href="http://semver.org/"&gt;semantic versioning&lt;/a&gt;, I've
thought of it as a neat idea. But only recently did it occur to me that what
I liked about the idea was its goal, much less its execution (more on that
below). What made it obvious was &lt;a href="https://github.com/jashkenas/underscore/issues/1805"&gt;this lengthy
discussion&lt;/a&gt; about breaking
changes introduced in v1.7 of &lt;a href="http://underscorejs.org/"&gt;underscore.js&lt;/a&gt; without
an accompanying major version bump.&lt;/p&gt;
&lt;p&gt;Even though I still think sticking to semver is the right thing to do if your
community of users expects you to (even if you don't personally like the
system), I am convinced there are fundamentally better ways of dealing with the
problem of safely and consistently updating dependencies.&lt;/p&gt;
&lt;p&gt;It made me want to add &lt;a href="https://github.com/jashkenas/underscore/issues/1805#issuecomment-66929684"&gt;my two cents to the
discussion&lt;/a&gt;,
as someone who's more of a dabbler in programming and not really part of the
community, so feel free to ignore me :) I attach my commentary below for
reference (it's virtually the same text as in the link above).&lt;/p&gt;
&lt;h1&gt;tl;dr&lt;/h1&gt;
&lt;p&gt;semver is trying to do the right thing, but doing it wrong -- instead of
&lt;strong&gt;implicitly&lt;/strong&gt; encoding severity of change information in &lt;strong&gt;version numbers&lt;/strong&gt;,
&lt;strong&gt;explicit keywords&lt;/strong&gt; like :patch, :potentially-breaking or :major-api-change
would make much more sense.&lt;/p&gt;
&lt;h1&gt;More verbosely&lt;/h1&gt;
&lt;p&gt;I've always found the goals of semver worthy, but this thread has made me
realize that while its aims are commendable, its methods are kind of broken:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;semver tries to take an existing semiotic system (= version numbers), which
has developed informally and is therefore a loose convention rather than an
exact spec, and reinterpret it in terms of an exact spec (or impose that spec on
it). trouble is, the prior informal meaning won't go away so easily (why should
it?), especially for projects that have been around longer than semver. the
problem then is, since the two systems (the informal one and semver) look the
same in terms of their symbolic representation, it's hard to guess which one
you're dealing with by just eyeballing the version number of a library (or
project in general).&lt;/p&gt;
&lt;p&gt;it's like if someone decided that "f*ck" should mean "orchid" from now on,
because it's nicer -- on hearing the word, you'd never know if it's being
used as the original profanity, or in its new meaning. homonymy is a pain to
deal with when it's accidental (cf. NLP), so why introduce it on purpose?
the job that semver set out to do should be fulfilled by a new formal means
which is instantly recognizable, not by hijacking an existing one and
overlaying additional interpretation on it and thus making it &lt;strong&gt;ambiguous&lt;/strong&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;even if version numbers hadn't existed before semver, they're terribly
&lt;strong&gt;inadequate&lt;/strong&gt; for the purpose of conveying information about the severity of
changes introduced by an update (though I understand their appeal to
mathematically-minded people). they're inadequate because they're &lt;strong&gt;implicit&lt;/strong&gt;
-- it's a bit like if someone decided they don't need hash maps because they can
make do with arrays by remembering the order in which they're adding in the
key-val pairs. if I remember the order, then I know which key the given index
implicitly refers to, and the result is as good as a hash map, isn't it?&lt;/p&gt;
&lt;p&gt;except it isn't. keys are useful because they have &lt;strong&gt;explicit semantics&lt;/strong&gt;,
making it instantly clear what kind of value you're retrieving. in the same
way, encoding the information about the severity of changes into version
numbers makes it implicit (in addition to being ambiguous, as stated
previously). why not use explicit keyword tags along with the version number
(which can be romantic, semantic -- whichever floats the dev team's boat and
best reflects the progress of the project) to give a heads up as to the
nature of the update? e.g. :patch, :potentially-breaking, :major-api-change
etc.&lt;/p&gt;
&lt;p&gt;granted, even language is a code which needs to be learned, like semver
(gross oversimplification here, but let's not get into the details of
language acquisition), but since it's widely established and
conventionalized for conveying the kinds of meanings semver is trying to
convey, &lt;strong&gt;why not just use it when it's available&lt;/strong&gt;? why use a system
(version numbers) which is less well-suited to the purpose &lt;strong&gt;and&lt;/strong&gt; ambiguous
to boot?&lt;/p&gt;
&lt;p&gt;(on the other hand, numbers are eminently well-suited for keeping track of
which version is newer than which and how much so -- the original purpose of
version numbering -- because they are designed to have orderings defined on
them. by contrast, words would do a terrible job at this. if you care to
indicate the evolution of your codebase, you might introduce your own
disciplined &lt;a href="http://sentimentalversioning.org/"&gt;romantic or sentimental&lt;/a&gt;
versioning scheme, which ironically is a more meaningful and ergo semantic
way of doing versioning than semver, because it sticks to the conventional
semantics of numbers (the closer the numbers, the more similar the
versions). if you don't care about this, which is perfectly fine, you might
as well use dates for version numbers.)&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;keyword tags have the advantage that they're instantly human-readable by anyone
who has a basic command of English. if there is sufficient will in the
community, a useful subset can be frozen in a binding spec, so that they are
machine-readable as well.&lt;/p&gt;
&lt;p&gt;I'm not sure whether these keywords should be an appendix to the version number
(like v2.3.4-:potentially-breaking), or whether the information they provide
should be more extensive and included in a formalized preamble to the changelog
(finally forcing people to at least take a glance at it ;) ). using the latter
approach, the information provided could be (optionally) even more targeted,
e.g. detailing explicitly which parts of the API are affected in a non-backwards
compatible manner by the update.&lt;/p&gt;
&lt;p&gt;anyways, just a few ideas :) I am not primarily a coder, so there may be obvious
drawbacks to this scheme that I can't see or which have already been discussed
by the community on multiple occasions which have escaped my attention. in which
case, please bear with me and excuse my lack of sophistication.&lt;/p&gt;</content><category term="floss"></category><category term="semver"></category><category term="versioning"></category><category term="underscore.js"></category><category term="library"></category><category term="development"></category><category term="dependency"></category></entry></feed>